flowchart TD

A["User inputs: company list, keywords, date range"] --> B["Config: query templates, safe limits, retries"]

subgraph S1["Ingestion and scraping"]
direction TB
B --> C["GDELT API client: fetch data with pagination"]
C --> D["Safety controls: throttle, backoff, retries"]
D --> E["Raw collector: JSON or CSV batches"]
end

subgraph S2["Raw storage"]
direction TB
E --> F["Raw store: raw/gdelt/date/company/batch"]
F --> G["Run logs: requests, failures, latency"]
end

subgraph S3["Processing and normalization"]
direction TB
F --> H["Schema normalize: columns, timestamps, source, url"]
H --> I["Deduplicate: url hash and title time keys"]
I --> J["Text cleaning: strip html, stopwords, normalize"]
J --> K["Curated dataset: master CSV"]
end

subgraph S4["EDA and analytics"]
direction TB
K --> L["Feature engineering: month_year, buckets, group fields"]
L --> M["Sweetviz report: EDA html"]
L --> N["TFIDF keywords: top tokens by selected filter"]
L --> O["Plotly dashboard: cascading filters and trends"]
N --> O
O --> P["Interactive output: Plotly html"]
end

subgraph S5["Exports"]
direction TB
P --> Q["Kaleido exports: static PNG or SVG"]
M --> R["Artifacts: Sweetviz html, Plotly html, images"]
Q --> R
end

subgraph S6["Consumption"]
direction TB
R --> T["GitHub repo: README and outputs"]
R --> U["Submission pack: report and images"]
R --> V["Optional modeling: sentiment and forecasting"]
end

G -. "monitoring" .-> D
B -. "reproducibility" .-> K
D --> W["Limitation: free tier practical window about 3 months"]
W --> T
